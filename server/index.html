<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Grand Repository in the Sky</title>
        <meta name="description" content="Mobile and distributed computing systems, lab assignement.">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
        <link rel="stylesheet" href="main.css" type="text/css">
        <script src='//js.zapjs.com/js/download.js'></script>
    </head>
    <body onload='getStatus()'>

        <form id="connectForm">
            <label>IP:</label>
            <input type="text" name="ip" id="ipField" required>
            <label>Port:</label>
            <input type="text" name="port" id="portField" required>
            <button type='button'
                    id="connectButton"
                    onclick="connect()">Connect</button>
            <button type='button'
                    id='quitButton'
                    onclick="leaveCircle()">Quit & shutdown</button
                    style='display: none'>
            <i  class="fa fa-check" 
                id='connectOK' 
                style="color: green; display: none" ></i>
            <i  class="fa fa-times" 
                id='connectFail' 
                style="color: red; display: none"></i>
            <i  class="fa fa-refresh fa-spin" 
                id="connectWait" 
                style="display: none"></i>
        </form>
        
        <h1>Grand Repository in the Sky</h1>

        <h2>Mobile and distributed computing systems</h2>

        <div>
            <h2 id="nodeID"></h2>
        </div>

        <h3>File storage : </h3>
        <fieldset>
        <form id="storeFile" enctype="multipart/form-data">
            <label>Upload a file : </label>
            <input type="file" id="fileToUpload" name="file" required>
            <br/>
            <button type="submit" 
                    id="uploadButton">Upload file</button>
            <i  class="fa fa-check" 
                id='uploadOK' 
                style="color: green; display: none" ></i>
            <i  class="fa fa-times" 
                id='uploadFail' 
                style="color: red; display: none"></i>
            <i  class="w3-spin fa fa-refresh" 
                id="uploadWait" 
                style="display: none"></i>
        </form>
        </fieldset>
   
        <h3>Retrieve file : </h3>
        <fieldset>
        <form id="downloadFile">
            <label>Name of the file : </label>
            <input  id="fileToDownload" 
                    type="search" 
                    name="fileName" 
                    onkeypress="refreshUI('download')" 
                    required>
            <button type ='button' 
                    id='searchToDownload' 
                    onclick='search((document.getElementById("fileToDownload").value), "download")'>Search</button>
            <i  class="w3-spin fa fa-refresh" 
                id="downloadSearchRefresh" 
                style="display: none"></i>
            <i  class="fa fa-check" 
                id='downloadSearchOK' 
                style="color: green; display: none" ></i>
            <i  class="fa fa-times" 
                id='downloadSearchFail' 
                style="color: red; display: none"></i>
            <br/>
            <button type='button'
                    id='downloadButton' 
                    onclick="downloadFile()" 
                    style="display: none">Download file</button>        
        </form>
        </fieldset>
        
        <h3>Update file : </h3>
        <fieldset>
        <form   id='updateFile'>
            <label>New version of the file : </label>
            <input  type="file"
                    name="value" 
                    onchange="refreshUI('update')" 
                    id = 'fileToUpdate'
                    required>
            <button type='button'
                    id='searchToUpdate'
                    onclick='search(document.getElementById("fileToUpdate").value, "update")'>Search</button>
            <i  class="w3-spin fa fa-refresh" 
                id="updateSearchRefresh" 
                style="display: none"></i>
            <i  class="fa fa-check" 
                id='updateSearchOK' 
                style="color: green; display: none" ></i>
            <i  class="fa fa-times" 
                id='updateSearchFail' 
                style="color: red; display: none"></i>
            <br/>
            <button type="button"
                    id='updateButton'
                    onclick="update()" 
                    style='display: none'>Replace file</button>        
        </form>
        </fieldset>
        
        <h3>Delete file : </h3>
        <fieldset>
        <form id='deleteFile'>
            <label>Name of the file : </label>
            <input  type="text" 
                    id='fileToDelete' 
                    name="value"
                    onkeypress='refreshUI("delete")'
                    required>
            <button type='button'
                    id='searchToDelete'
                    onclick='search(document.getElementById("fileToDelete").value, "delete")'>Search</button>
            <i  class="w3-spin fa fa-refresh" 
                id="deleteSearchRefresh" 
                style="display: none"></i>
            <i  class="fa fa-check" 
                id='deleteSearchOK' 
                style="color: green; display: none" ></i>
            <i  class="fa fa-times" 
                id='deleteSearchFail' 
                style="color: red; display: none"></i>
            <br/>
            <button  type="button"
                    id="deleteButton"
                    onclick="deleteFile()"
                    style="display: none">Delete file</button>        
        </form>
        </fieldset>
        <script type="text/javascript" src="script.js"></script>
    </body>
</html>